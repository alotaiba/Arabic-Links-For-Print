<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ar" lang="ar" dir="rtl">
<head>
	<title>مثال تحسين طباعة الروابط</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="style.css" media="all" />
	<style type="text/css">
	@media screen
	{
		.nodisplay
		{
			display:none;
		}
	}
	@media print
	{
		.article a:after
		{
			content: " ("attr(href)") ";
			font-size: 90%;
		}
		.deleteLinks a:after
		{
			content: "";
		}
		.footnotes
		{
			font-size: 90%;
		}
		.screen-info
		{
			display:none;
		}
	}
	</style>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
	<script type="text/javascript" src="../linksforprint.js"></script>
	<script type="text/javascript">
		//<![CDATA[
		$(function(){
			$(".article").linksForPrint();
		});
		//]]>
	</script>
</head>

<body>
	<div id="wrapper">
		<p class="screen-info">
		جرب طباعة هذا المقال، أو رؤيته عند عرض صفحة الطباعة، لترى كيف يتم إدراج الروابط والمراجع بشكل آلي أسفل المقال.
		</p>
		<div class="article">
			<h1><a href="http://www.almashroo.com/316/%D8%A7%D9%86%D8%AA%D8%A8%D9%87-opera-10-%D9%84%D8%A7-%D9%8A%D8%B3%D8%A7%D9%88%D9%8A-opera-1/">انتبه: Opera 10 لا يساوي Opera 1</a></h1>
			<p>يعود إلينا بنسخته التجريبية <a href="http://my.opera.com/desktopteam/blog/2008/12/03/peregrine-takes-flight-opera-10-0-alpha-is-here">المتصفح الشهير Opera بنسخته الجديدة 10</a> والتي كسر بها الأرقام القياسية، حيث أنه أول متصفح موجود لحد الآن يصل إلى نسخة مكونة من رقم عشاري، حيث نجد أقرب المنافسين لهذا الرقم هو متصفح <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer بالنسخة الثامنة</a> والتي مازالت تحت التجريب أيضا، وأنه من أوئل المتصفحات التي اجتازت وبامتياز اختبار <a href="http://acid3.acidtests.org/">ACID 3</a>.</p>
			<p>بالمناسبة، لمن لا يعرف اختبار <a href="http://acid3.acidtests.org/">ACID 3</a>، فهذا تعريف مقتبس من ويكيبيديا:</p>
			<blockquote cite="http://ar.wikipedia.org/wiki/%D8%A3%D8%B3%D9%8A%D8%AF3"><p><b>أسيد3</b> (<a href="http://ar.wikipedia.org/wiki/%D9%84%D8%BA%D8%A9_%D8%A5%D9%86%D8%AC%D9%84%D9%8A%D8%B2%D9%8A%D8%A9" title="لغة إنجليزية">بالإنجليزية</a>: Acid3) هى <a href="http://ar.wikipedia.org/wiki/%D9%85%D9%88%D9%82%D8%B9_%D9%88%D9%8A%D8%A8" title="موقع ويب">صفحة ويب</a> اختيارية تابعة <a href="http://ar.wikipedia.org/wiki/%D9%85%D8%B4%D8%B1%D9%88%D8%B9_%D9%85%D8%B9%D8%A7%D9%8A%D9%8A%D8%B1_%D8%A7%D9%84%D9%88%D9%8A%D8%A8" title="مشروع معايير الويب">لمشروع معايير الويب</a> من أجل اختبار كفائة وقدرة <a href="http://ar.wikipedia.org/wiki/%D9%85%D8%AA%D8%B5%D9%81%D8%AD_%D9%88%D8%A8" title="متصفح وب">متصفحات الويب</a> و مدى تحقيقه <a href="http://ar.wikipedia.org/wiki/%D9%85%D8%B9%D8%A7%D9%8A%D9%8A%D8%B1_%D8%A7%D9%84%D9%88%D9%8A%D8%A8" title="معايير الويب">لمعايير الويب</a> خاصة المعايير المتعلقة ب <span dir="ltr" lang="en" xml:lang="en">Document Object Model (DOM)</span> و <a href="http://ar.wikipedia.org/wiki/%D8%AC%D8%A7%D9%81%D8%A7_%D8%B3%D9%83%D8%B1%D9%8A%D8%A8%D8%AA" title="جافا سكريبت">جافا سكريبت</a>.</p></blockquote>
			<p>ومن بين الأشياء التي كسرها متصفح <a href="http://www.opera.com/">Opera</a> الجديد هي المواقع التي تستهدف المتصفحات المعينة لتعرض ما يناسبها أو ما يسمى <a href="http://en.wikipedia.org/wiki/Browser_sniffing">Browser Sniffing</a>، حيث <a href="http://my.opera.com/Andrew%20Gregory/blog/2008/05/11/opera-10-is-too-old">يشير Andrew Gregory</a> إلى العادات البرمجية السيئة التي يتبعها بعض مطوري الجافاسكربت لاستهداف المتصفحات لتفادي عيوبها في طريقة عرض المحتويات، لنأخذ على سبيل المثال الطريقة التي طرحها <a href="http://my.opera.com/Andrew%20Gregory/blog/2008/05/11/opera-10-is-too-old">Andrew</a> والمنتشرة جدا في المواقع:</p>
			<pre class="script">
if (navigator.userAgent.toLowerCase().indexOf('opera') != -1)
{
	isOpera = true;
	i = navigator.userAgent.indexOf('Opera') + 6;
	v = parseInt(navigator.userAgent.substring(i, i+1));
	if(v &lt; 7)
		isOperaOld = true;
}
			</pre>

			<p>حيث في قراءة سريعة ستجد أن هذا الكود يرى أولا هل المتصفح هو Opera؟ إن كان الجواب بنعم يقوم بأخذ أول رقم بعد الكلمة &#8220;Opera&#8221; ويترك كل الباقي ويقوم بمقارنته مع الرقم 7. وبما أن 1 أصغر من 7 إذا المتصفح الجديد &#8220;قديم&#8221; بنظر مطور الجافاسكربت.</p>
			<p>الكل يعلم أن كل متصفح له عيوبه سواء كان في طريقة عرض HTML، معالجة Javascript، أو تحليل CSS، وللتغلب على مشكلة كل متصفح لجأ المطورون إلى استخدام هذه الطرق لاستهدافها والتغلب على هذه المشاكل، ولكن لا يجب علينا أن نعالج الخطأ بخطأ أكبر منه، هناك الكثير من الطرق والأساليب للتغلب على مشاكل المتصفحات وبالأخص مشاكل الجافاسكربت، ومن هذه الطرق هي اصطياد العيوب الموجودة في تلك المتصفحات ومن ثم ايجاد حل آخر بديل. أعني بكلامي هذا هو عدم استهداف المتصفح بعينه أو نسخه بعينها وإنما استهداف العيب أو القصور فيها وايجاد طريقة أخرى لحلها، على سبيل المثال لنأخذ كود بسيط وهو إنشاء XMLHTTPRequest أو ما يعرف AJAX:</p>
			<pre class="script">
function createXMLHTTPRequest () {
	var xmlhttp=false;
	try {
		xmlhttp = new ActiveXObject('Msxml2.XMLHTTP');
	} catch (e) {
		try {
			xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
		} catch (E) {
			xmlhttp = false;
		}
	}
	if (!xmlhttp &amp;&amp; typeof XMLHttpRequest!='undefined') {
		xmlhttp = new XMLHttpRequest();
	}
	return xmlhttp;
}
			</pre>
			<p>نرى أننا نستخدم بعض الطرق لايجاد كائن XMLHTTPRequest عن طريق جمل <span dir="ltr" lang="en" xml:lang="en">try()</span> و<span dir="ltr" lang="en" xml:lang="en">catch()</span> أي إن لم ينفع مثلا <span dir="ltr" lang="en" xml:lang="en">ActiveXObject(&#8221;Msxml2.XMLHTTP&#8221;)</span> نرى إن كان ينفع <span dir="ltr" lang="en" xml:lang="en">ActiveXObject(&#8221;Microsoft.XMLHTTP&#8221;)</span> وإن لم تنفع الطرق نذهب إلى الدالة <span dir="ltr" lang="en" xml:lang="en">XMLHttpRequest()</span>، بهذه الطريقة لم نستهدف المتصفح وإنما استهدفنا العيب في المتصفح، الفائدة الكبيرة هنا هي في المستقبل وعندما يتطور المتصفح أكيد سينحل هذا العيب وبالتالي لن يتأثر الموقع.</p>
			<p>المشكلة الكبيرة هنا أن المستخدم العادي لا يعرف هذه المعلومات، لذا وعندما يجرب متصفح <a href="http://www.opera.com/">Opera 10</a> ويرى أن بعض المواقع لا تعمل بالشكل المطلوب،  يلوم المتصفح المسكين بينما الملام هنا يجب أن يكون المطور، وهذا يذكرني بقصة انتشار متصفح <a href="http://www.mozilla.com/firefox/">Firefox</a> وكيف كانت (وللأسف لازالت) الناس تلومه لأنه يتبع المقاييس العالمية.</p>
		</div>
	</div>
</body>
</html>